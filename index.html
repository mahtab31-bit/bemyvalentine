<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>For You ‚ù§Ô∏è</title>

<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Inter:wght@300;500&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

<style>
/* GENERAL RESET */
body {
  margin: 0;
  font-family: 'Inter', sans-serif;
  min-height: 100vh;
  background: #020617;
  overflow: hidden;
}

/* SCREENS */
.screen {
  position: fixed;
  inset: 0;
  display: none;
  justify-content: center;
  align-items: center;
  padding: 24px;
  text-align: center;
  z-index: 10;
}

.screen.active {
  display: flex;
}

/* INTRO SCREEN */
.intro {
  background: linear-gradient(135deg, #fff1f4, #ffe4ec);
  color: #2d2d2d;
}

/* UNIVERSE SCREENS */
.universe {
  background:
    radial-gradient(circle at 20% 30%, rgba(244,114,182,0.15), transparent 40%),
    radial-gradient(circle at 80% 70%, rgba(168,85,247,0.15), transparent 40%),
    radial-gradient(circle at top, #0f172a, #020617);
  color: #f8fafc;
}

/* Twinkling Stars Background */
.universe::before {
  content: "";
  position: absolute;
  inset: 0;
  background-image: 
    radial-gradient(1px 1px at 20px 30px, #fff, rgba(0,0,0,0)),
    radial-gradient(1px 1px at 150px 150px, #fff, rgba(0,0,0,0)),
    radial-gradient(2px 2px at 50px 160px, #f472b6, rgba(0,0,0,0)),
    radial-gradient(1px 1px at 280px 440px, #fff, rgba(0,0,0,0));
  background-size: 300px 300px;
  animation: twinkle 4s infinite linear;
  opacity: 0.4;
  z-index: -1;
}

@keyframes twinkle {
  0%, 100% { opacity: 0.3; }
  50% { opacity: 0.7; }
}

/* CARD */
.card {
  max-width: 420px;
  width: 100%;
  background: rgba(255,255,255,0.08);
  border-radius: 24px;
  padding: 28px;
  backdrop-filter: blur(10px);
  box-shadow: 0 20px 60px rgba(0,0,0,0.25);
  max-height: 90vh;
  overflow-y: auto;
  position: relative;
  z-index: 20;
}

.intro .card { background: white; color: #2d2d2d; }

h1 { font-family: 'Playfair Display', serif; font-size: 30px; margin-bottom: 16px; }
p { font-size: 16px; line-height: 1.6; opacity: 0.95; }

#typewriter { min-height: 120px; }

button {
  margin-top: 20px;
  padding: 14px 28px;
  border-radius: 999px;
  border: none;
  font-size: 16px;
  cursor: pointer;
  transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

.intro button { background: #ff4d6d; color: white; }
.universe button { background: #f472b6; color: #020617; font-weight: 600; }
.universe button:hover { transform: scale(1.05); background: #fb7185; }

/* ORBIT SYSTEM */
.orbit { position: relative; width: 300px; height: 300px; margin: 40px auto; }
.orbit-center {
  position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
  font-family: 'Playfair Display', serif; font-size: 18px; color: #f472b6;
}
.planet {
  position: absolute; top: 50%; left: 50%; width: 80px; height: 80px;
  margin: -40px; border-radius: 18px; overflow: hidden;
  box-shadow: 0 0 20px rgba(244,114,182,0.3); border: 2px solid rgba(255,255,255,0.2);
}
.planet img { width: 100%; height: 100%; object-fit: cover; }

.p1 { animation: orbit1 15s linear infinite; }
.p2 { animation: orbit2 22s linear infinite reverse; }
.p3 { animation: orbit3 30s linear infinite; }

@keyframes orbit1 {
  from { transform: rotate(0deg) translateX(110px) rotate(0deg); }
  to { transform: rotate(360deg) translateX(110px) rotate(-360deg); }
}
@keyframes orbit2 {
  from { transform: rotate(0deg) translateX(140px) rotate(0deg); }
  to { transform: rotate(360deg) translateX(140px) rotate(-360deg); }
}
@keyframes orbit3 {
  from { transform: rotate(0deg) translateX(80px) rotate(0deg); }
  to { transform: rotate(360deg) translateX(80px) rotate(-360deg); }
}

/* FLOATING HEARTS */
.floating-heart {
  position: absolute; color: #ff4d6d; font-size: 24px;
  animation: floatUp 4s linear forwards; pointer-events: none; z-index: 100;
}
@keyframes floatUp {
  0% { transform: translateY(100vh) rotate(0deg); opacity: 1; }
  100% { transform: translateY(-10vh) rotate(360deg); opacity: 0; }
}

/* BUTTON WRAPPER FOR YES/NO */
.choices { 
  display: flex; 
  gap: 16px; 
  justify-content: center; 
  align-items: center;
  position: relative; 
  min-height: 120px; 
}

#noBtn {
  position: relative;
  transition: all 0.2s ease;
}
</style>
</head>
<body>

<audio id="bgMusic" loop preload="auto">
  <source src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" type="audio/mpeg">
</audio>

<div class="screen intro active">
  <div class="card">
    <h1>Hi love ü§ç</h1>
    <div id="typewriter"></div>
    <button id="continueBtn" style="display:none;" onclick="startUniverse()">Continue</button>
  </div>
</div>

<div class="screen universe">
  <div class="card">
    <h1>What are the odds?</h1>
    <p>Out of billions of people,<br>infinite timelines,<br>and a thousand tiny decisions‚Ä¶</p>
    <p>We still found each other.</p>
    <button onclick="go(1)">Enter the universe</button>
  </div>
</div>

<div class="screen universe">
  <div class="card" style="background: transparent; box-shadow: none;">
    <h1>Our little universe</h1>
    <p>Every memory has its own orbit.</p>
    <div class="orbit">
      <div class="orbit-center">You & Me ‚ú®</div>
      <div class="planet p1"><img src="./2.png" alt="Memory 1"></div>
      <div class="planet p2"><img src="./4.png" alt="Memory 2"></div>
      <div class="planet p3"><img src="./3.png" alt="Memory 3"></div>
    </div>
    <button onclick="go(2)">Keep going</button>
  </div>
</div>

<div class="screen universe">
  <div class="card">
    <h1>Infinite Realities</h1>
    <p>In one universe, we never met.<br>In another, we stayed strangers.</p>
    <p>But in <b>this one</b>, I'm yours.</p>
    <div class="choices">
      <button onclick="go(3)">The best timeline</button>
    </div>
  </div>
</div>

<div id="screen-final" class="screen universe">
  <div class="card" id="finalCard">
    <h1 id="final-heading">The final question</h1>
    <p>You‚Äôve made it through timelines,<br>alternate universes,<br>and suspiciously easy choices.</p>
    <h1 style="margin-top:24px;">Will you be my Valentine? ‚ù§Ô∏è</h1>
    <div class="choices" id="choiceArea">
      <button onclick="celebrate()">Yes</button>
      <button id="noBtn">No</button>
    </div>
    <p style="margin-top:16px; font-size:14px; opacity:0.7;">(Choose wisely.)</p>
  </div>
</div>

<script>
/* UPDATED WORDS */
const text = [
  "I could have sent you a message.",
  "Or bought a card.",
  "But you know me.",
  "I like building things.",
  "",
  "And if I can build something,",
  "I can build something just for you.",
  "",
  "Out of everything I could have built‚Ä¶",
  "I‚Äôm just glad I built this with you."
];

let i = 0, line = 0;
const speed = 40;
const el = document.getElementById("typewriter");

function type() {
  if (line < text.length) {
    if (i < text[line].length) {
      el.innerHTML += text[line].charAt(i);
      i++;
      setTimeout(type, speed);
    } else {
      el.innerHTML += "<br>";
      i = 0; line++;
      setTimeout(type, 600);
    }
  } else {
    document.getElementById("continueBtn").style.display = "inline-block";
  }
}
type();

const screens = document.querySelectorAll('.screen');
let current = 0;

function go(n) {
  screens[current].classList.remove('active');
  current = n + 1;
  screens[current].classList.add('active');
}

function startUniverse() {
  const audio = document.getElementById("bgMusic");
  audio.volume = 0.4;
  audio.play().catch(e => console.log("Audio play blocked", e));
  go(0);
}

function celebrate() {
  const defaults = { spread: 360, ticks: 100, gravity: 0.5, decay: 0.94, startVelocity: 30, shapes: ['heart'], colors: ['#ff4d6d', '#f472b6'] };
  confetti({ ...defaults, particleCount: 100, scalar: 2 });
  
  for (let i = 0; i < 20; i++) {
    setTimeout(() => {
      const heart = document.createElement('div');
      heart.classList.add('floating-heart');
      heart.innerHTML = '‚ù§Ô∏è';
      heart.style.left = Math.random() * 100 + 'vw';
      heart.style.animationDuration = (Math.random() * 2 + 3) + 's';
      document.body.appendChild(heart);
      setTimeout(() => heart.remove(), 5000);
    }, i * 250);
  }

  document.getElementById('final-heading').innerHTML = "Yay! See you tonight! ü•∞";
  document.getElementById('noBtn').style.display = 'none';
}

/* NO BUTTON STAY-IN-BOX LOGIC */
const noBtn = document.getElementById("noBtn");
const finalCard = document.getElementById("finalCard");

noBtn.addEventListener("mouseover", moveButton);
noBtn.addEventListener("touchstart", (e) => { e.preventDefault(); moveButton(); });

function moveButton() {
  const cardRect = finalCard.getBoundingClientRect();
  const btnRect = noBtn.getBoundingClientRect();

  // Define limits (padding of 40px inside the card)
  const maxX = (cardRect.width / 2) - (btnRect.width / 2) - 40;
  const maxY = (cardRect.height / 2) - (btnRect.height / 2) - 40;

  const randomX = (Math.random() * maxX * 2) - maxX;
  const randomY = (Math.random() * maxY * 2) - maxY;

  noBtn.style.transform = `translate(${randomX}px, ${randomY}px)`;
}
</script>

</body>
</html>
